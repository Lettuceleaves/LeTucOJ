 # 代码执行环境接口规范
 
 ## 1. 简介
 
 本规范旨在为开源代码评测系统定义一套标准化的接口。遵循此规范，开发者可以为系统添加新的编程语言支持，而无需修改核心业务逻辑。所有语言的 Docker 镜像和执行脚本都必须遵守以下约定。
 
 ---
 
 ## 2. Docker 镜像规范
 
 ### 2.1 镜像命名
 
 所有语言的镜像必须采用以下命名格式：
 
 * **`run_<language_name>`**
 
 **示例:**
 
 * `run_c`
 
 * `run_cpp`
 
 * `run_java`
 
 * `run_python`
 
 * `run_js`
 
 ### 2.2 镜像内容
 
 每个镜像必须包含：
 
 * **基础运行时环境：** 针对该语言的官方或最精简的基础镜像（例如 `gcc:12`, `openjdk:17-jdk-slim`, `python:3.10-slim`, `node:18`）。
 
 * **执行脚本：** 一个名为 `run.sh` 的可执行脚本，位于镜像内的 `/usr/local/bin/` 路径下。
 
 * **`ENTRYPOINT`：** 必须将 `ENTRYPOINT` 设置为 `/usr/local/bin/run.sh`。
 
 ### 2.3 `Dockerfile` 模板
 
 ```
 # 使用官方基础镜像
 FROM <base_image_name>
 
 # 将脚本复制到镜像中
 COPY run.sh /usr/local/bin/run.sh
 
 # 授予脚本执行权限
 RUN chmod +x /usr/local/bin/run.sh
 
 # 设置入口点
 ENTRYPOINT ["/usr/local/bin/run.sh"]
 
 # 不提供默认参数
 CMD []
 ```
 
 ---
 
 ## 3. `run.sh` 脚本规范
 
 ### 3.1 输入参数
 
 脚本必须接受一个**命令行参数**：
 
 * **`N`：** 一个整数，表示测试用例的总数。
 
 ### 3.2 文件系统接口
 
 脚本必须在 `/submission` 目录下执行，并通过以下**约定好的文件路径**进行输入、输出和状态交互。
 
 | 文件类型 | 命名格式 | 作用 |
 | :--- | :--- | :--- |
 | **用户代码** | `prog.<ext>` | 用户提交的源代码文件。扩展名由语言决定，例如 `.c`, `.cpp`, `.java`, `.py`, `.js`。 |
 | **输入用例** | `in_1.txt`, `in_2.txt`, ..., `in_N.txt` | 包含每个测试用例的输入数据。 |
 | **标准输出** | `out_1.txt`, `out_2.txt`, ..., `out_N.txt` | 程序运行后，每个测试用例的标准输出结果。 |
 | **编译错误** | `compile.txt` | 编译器输出的错误信息（如果存在）。 |
 | **运行时错误** | `err.txt` | 程序运行时的标准错误输出信息（如果存在）。 |
 | **状态码** | `status.txt` | 包含一个整数，表示执行结果状态码。这是最重要的输出文件。 |
 
 ### 3.3 状态码（`status.txt`）
 
 脚本必须在执行结束时，将一个代表结果的**整数**写入 `/submission/status.txt` 文件。
 
 | 状态码 | 描述 | 备注 |
 | :--- | :--- | :--- |
 | `0` | **成功** | 所有测试用例均成功执行。 |
 | `1` | **答案错误** | 由后端处理得出，与脚本无关。 |
 | `2` | **编译错误** | 源代码无法成功编译。 |
 | `3` | **运行时错误** | 程序在执行时崩溃或退出码非零。 |
 | `4` | **超时** | 程序执行时间超过限制。 |
 | `5` | **文件系统错误** | 输入文件缺失或无法访问等。 |
