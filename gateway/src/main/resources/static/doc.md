# LetucOJ 使用文档

欢迎使用 LetucOJ，本平台提供在线题库管理、代码编辑与评测功能。

本章节是使用部分，会简单介绍功能。未完成的功能会标记为TODO

## 一、注册与登录

### 注册账号

首页提供注册界面，请记住自己的密码，尤其是管理员账户，管理员拥有增删改查题库的权限

### 登录系统

在首页点击登录，输入账号密码即可

### 授权与取消权限

// TODO

### 注销

// TODO

## 题目列表

题目列表默认根据题目英文名称字典序排序，每页选取前十道题

// TODO 跳转到固定页数（返回消息里还没有总题数）

// TODO 支持关键词搜索，会从 英文名、中文名、标签这三个字段中寻找匹配项（可部分匹配）

// TODO 支持多种排序方式

## 出题页面

拥有管理权限的账号可以在题目列表页面打开出题页面，需要填写以下内容：

### 英文标识
  这道题的唯一标识，建议使用统一的格式命名，只支持ascii(因为要用在url里)。
  
### 题目名称
  便于用户阅读的字段，一般为中文名。

### 测试点数量
  不可修改字段，会在添加案例时自己递增，放在这里只是方便查看信息。

### 难度
  建议在1-100内

### 标签
  标签越多，越能方便查找，基于字符串匹配所以不用在意格式，不过最好统一格式吧
### 作者
  参与了这道题的作者

### 是否公开
  比赛或其他需要时修改

### 是否展示题解
  比赛或其他需要时修改

### 题目描述
  支持MarkDown，下方有及时渲染框，但是并没有做本地保存，所以刷新时会消失！！！（可以考虑后续加上，但目前来看没必要）

### 题解
  这道题的正确答案的完整代码。只支持c语言。

## 答题页面

### 描述
  使用MarkDown模式显示

### 答题

  使用monaco-editor-vue编辑器模块，vscode同款!（超大声）,没有内置c语言提示词，但是已经很够用了（之前的真的太屎了。。。）

  注意，代码只会在刷新、切换子页面、输入空格和回车的时候保存！（JS里面只在这几个动作里面使用了保存函数）不过也够了。。。吧，要是有特殊情况或者bug再联系我吧

  退出会返回列表，提交之后自动跳转结果页面

  // TODO 检验

### 题解
  如果题目设置了允许展示题解，这里会出现题解内容
  // TODO 题解页面支持monaco-editor-vue

### 结果
  根据收到的信息类型显示不同的颜色
  我尽可能把错误写清楚了，先排除自己这边的问题，如果确定是服务器的问题再联系管理员根据后面的文档找到服务器端的问题，还是不行再联系我。

# LetucOJ 开发文档

## 整体架构

纯纯的SpringMVC项目

### 前端
使用vue3开发，具体版本信息见后文，本人不会前端，所以全由ChatGPT生成，有问题别找我，我也不懂()

### 后端
使用SpringBoot框架 + 典中典三层结构

// TODO 使用DDD（不知道有没有必要，担心过度设计）

目前可运行的有以下模块：
网关模块、练习模块、允许模块、认证模块

// TODO 建议模块、出题辅助模块
// TODO 拆分练习模块，拆成题目模块和判题模块

目前使用的其他技术栈：
Minio、Mysql

// TODO Docker、Nacos、RocketMQ、Redis

## 前端结构

每个.vue结构分成 html、js、css三部分，学前端的应该比我懂

pages文件夹下有多个子文件夹，public放了静态的文件，目前只有首页背景的代码墙txt文件和这个文档md文件

src文件夹下才是重点

assets不重要，用处自己查()
components下面只有一个dialogs文件夹，这个是自定义弹窗组件，目前没有用上，但是测试下可以运行，使用方法我后面贴上来(如果不能运行就删了())
router是路由相关，添加新页面时要增加路由信息
stores和utils目前还是空的
views里面是所有页面，EditorPages下面是答题页面下的四个子页面
APP.vue和main.js都是启动用的，修改页面时根据需求修改

还有.gitignore用来阻止不必要的文件被传到github上，编译文件太大了()之前没注意，后端代码push一次几个G。。。越来越大，直到文件过大被拦截了

// TODO SpringGateway 挂载vue3的history模式页面 会出现刷新404(详见history模式原理)，我试过自己在后端加配置，但是搞了半天没成功，还是使用的hash模式，但是很丑， Nginx搭配history模式会方便点(网上有教程，我没自己试过)，但是已经有SpringGateway了就不引入了，防止过度设计，期待前端大手子优化。

## 后端结构

### 网关模块
负责拦截、转发和鉴权，不处理任何业务，具体鉴权方式去看源代码，也不多()

### 练习模块
目前还没拆分，负责两个业务，题目信息的增删改查和运行代码的代理服务，管理员提交题目信息时会更新数据库表，用户提交代码时会从Minio拉取到输入文件和期望的答案，拿到运行结果之后做比对或者报错

### 运行模块
只用来运行，根据用户代码和输入，并发执行代码，输出结果，目前只支持c语言

// TODO 增加运行池模块，优化docker创建这一块的时间，然后使得run运行后立刻销毁，彻底沙盒化

### 认证模块
现在只能用来保存账号密码

// TODO 升级成用户管理模块，管理更多信息

# 版本信息

// TODO 我是懒狗

# 报错信息对照

// TODO 有时间再整理吧()

# 部署&运维手册
mysqldump -u root -p --databases practice --result-file=init8.sql