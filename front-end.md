# 前端需求文档

失败报错，适当情况下退回原页面，下不赘述

## 首页

流式代码背景 背景式静态资源

登录按钮 注册按钮

## 登录界面

成功就跳转主页

## 注册界面

成功就跳转登录界面

## 主页

需要解析jwt，获取用户的role信息，分USER MANAGER和ROOT，用户，管理员，根权限管理员，后面不赘述

表单需要根据参数设置适当的格式检查和非空检查

提供一个按钮跳转到文档页面

管理员模式下，提供一个按钮跳转到minio的UI界面

## 文档

文档从接口读取

左侧导航栏，支持点击自动跳转，滚动跳转（不要秒切，需要那种快速上下滑动的效果）

文档展示 markdown格式

编辑按钮 退出按钮

## 文档编辑

文字编辑器和markdown渲染页面对比呈现

打开时从接口读取文档

保存按钮 退出按钮

### 题目列表 子页面

搜索栏输入框&搜索按钮

排序选项（n选1，字段参考接口文档）

初始化时从后端拉取题目，使用limit进行分页

下一页 上一页 （目前还不能获取总页数数据）

每一道题可以点击跳转到详情页

管理员（包括根权限，后面不赘述）模式下，每道题右侧设置修改按钮，跳转到习题管理页面，携带这道题的name参数

管理员模式下，提供添加习题按钮，也跳转到习题管理页面，不携带name参数或为空

### 历史记录 子页面

用户拉取自己的历史记录

管理员可以选择指定用户（默认自己）或全部用户

不同status的记录用不同颜色显示

可以设计点击查看详情，再给出代码和结果等的内容

### 竞赛考核 子页面

初始化时拉取全部contest（滚动条滑动浏览）（总数不会很多就没有分页），拿到的是全部信息，可以只保存列表中需要的字段（减少内存占用啥的）（后面出题的时候要注意，这些字段在竞赛不公开的时候也会给前端，不要放敏感信息，后面也许会更新）

可以考虑根据竞赛名称呈现不同美术效果，我暂时没有提供存储相关信息的字段，后续可以考虑添加，个人感觉根据名字判断已经不错了

点击列表项跳转详情页（提供了获取单个竞赛的信息的接口，如果前面拉取列表时保存了全部字段也可以直接用）

详情页拉取题目列表，如果不是考核时间会报错，会在字符串中携带剩余秒数（可以根据这个起始时间做倒计时，如果效率过低后面可以考虑提供新接口）

管理员模式下，同习题页，每个竞赛右侧提供修改按钮，跳转竞赛管理页面并携带参数

管理员模式下，同习题页，提供新建竞赛按钮，跳转不携带参数

### 用户管理 子页面

用户名 用户中文名 权限

注销按钮（需要提示用户，恢复账号需要练习管理员）

修改密码按钮（和注册保持相同的格式校验）

退出登录按钮（完成后跳转首页）

管理员模式下提供用户管理按钮，跳转用户管理页面

## 习题管理

根据参数判断是否需要拿到题目数据，有的话就初始化的时候填充

各个字段的填写、校验

描述需要文本编辑器和markdown对照显示，markdown只读，同步显示，注意文字框高度需要同步变化，后文几个文本框同理

题解需要代码编辑器

提交按钮

根据参数判断是update还是insert接口

添加案例功能，具体如下：

一个大框，里面上下两个文本编辑器小框，分别是输入框和输出框，输出框只读，可以设置初始文字，但是注意提交时检测（别把这个提交上去了），两个小框右侧（框内）设置一个获取按钮一个提交按钮，大框右侧一个加号按钮，效果如下

输入框为空或题解时不允许提交，提交后如果失败报错就设置输出框为特定文字（提交时检验，不能提交错误内容）

提交时将输入框和输出框内容传上去，成功后题解数字段需要前端+1（重新获取也行）

大框右侧那个加号按钮，点击后在下方追加一个新的大框（内容同上），同时加号按钮移动到这个新的大框右侧

提交之后该输入框只读，如果该大框在末尾，就新增一个

案例内容可以考虑本地浏览器保存防止刷新丢失

## 竞赛管理

初始化&各普通字段略

模仿上面的大框和加号的配置，需要单个输入框和按钮，用来添加这个竞赛中的习题

提交按钮

## 用户管理

普通用户拉取普通用户列表

管理者拉取管理和用户列表（排序由前端来，没有分页）

管理者的列表每一行右侧设置一个按钮，用户显示提升权限，成功后显示管理人，管理人同理，降低权限

## 习题详情页

退出按钮 （可以考虑设置上一题&下一题按钮）

### 描述 子页面

markdown显示描述文本内容

### 答题 子页面

代码编辑器 提交按钮 测试按钮

点击测试按钮后弹出小文本编辑器和检测按钮，用户输入内容，getCase，同习题管理页面

提交按钮触发后跳转结果子页面（或者ai子页面，或者把ai页面做成结果的子页面，提交时异步给ai发送一份代码）

代码需本地保存防止刷新丢失

### 题解 子页面

代码编辑器 只读

### AI 子页面

SSE获取，即使更新，在对话框追加内容

用户输入框 发送按钮

### 结果 子页面

根据不同的状态码显示颜色

使用从上方追加的形式，不需要保存到本地

## 竞赛详情页

退出按钮 初始化显示详细信息和题目列表，列表支持点击跳转到竞赛答题页面

榜单（看是做成按钮跳转到榜单页面还是就放在这里）

参加按钮

## 竞赛答题页面

### 描述

同上

### 代码编辑器

同上

### 结果

同上